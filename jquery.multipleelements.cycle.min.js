(function($){$.fn.multipleElementsCycle=function(options){var defaults={elementContainer:'#cycleElements',prevElement:'#cycleElementsLeft',nextElement:'#cycleElementsRight',speed:500,containerWidth:false,showCount:4,overrideStart:false,jumpTo:false};var options=$.extend(defaults,options);this.each(function(){var totalElements=$(this).find("li");var maxIndex=totalElements.length-1;var lowerIndex=(options.overrideStart===false)?Math.floor((maxIndex-options.showCount+1)/2):options.overrideStart;var elementWidth=$(this).find("li").outerWidth(true);var margin=((lowerIndex)*elementWidth)*-1;var upperIndex=lowerIndex+options.showCount;var parent=$(this);if(upperIndex>=totalElements.length)$(options.nextElement).hide();if(lowerIndex<=0)$(options.prevElement).hide();$(this).find(options.elementContainer).css({'width':(options.containerWidth)?options.containerWidth:elementWidth*options.showCount,'overflow':'hidden'});$(this).find("ul").css({'width':(maxIndex+1)*elementWidth,'padding':'0'});$("ul",parent).animate({marginLeft:margin},options.speed);var cycle={next:function(){if(upperIndex<=maxIndex){$(options.prevElement).show();margin=margin-elementWidth;upperIndex=upperIndex+1;lowerIndex=lowerIndex+1;$("ul",parent).animate({marginLeft:margin},options.speed);if(upperIndex>maxIndex)$(options.nextElement).hide();}},prev:function(){if(lowerIndex>=0){$(options.nextElement).show();upperIndex=upperIndex-1;lowerIndex=lowerIndex-1;margin=margin+elementWidth;$("ul",parent).animate({marginLeft:margin},options.speed);if((lowerIndex-1)<0)$(options.prevElement).hide();}},toPoint:function(pos){var oldUpper=upperIndex;if(pos==0){upperIndex=maxIndex+1;lowerIndex=upperIndex-options.showCount;}else if(pos<0){upperIndex=maxIndex+parseInt(pos);lowerIndex=lowerIndex+parseInt(pos);}else{lowerIndex=pos-1;upperIndex=lowerIndex+options.showCount;}var newwidth=(elementWidth*(oldUpper-upperIndex));margin=margin+newwidth;$("ul",parent).animate({marginLeft:margin},options.speed);if(upperIndex>=maxIndex)$(options.nextElement).hide();else $(options.nextElement).show();if(lowerIndex==0)$(options.prevElement).hide();else $(options.prevElement).show();}};$(options.nextElement).click(function(){cycle.next();return false;});$(options.prevElement).click(function(){cycle.prev();return false;});if(options.jumpTo){$(options.jumpTo).click(function(){cycle.toPoint($(this).attr('rel'));return false;});}});};})(jQuery);